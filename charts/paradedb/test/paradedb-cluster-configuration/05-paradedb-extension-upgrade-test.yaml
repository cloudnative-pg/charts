apiVersion: v1
kind: ConfigMap
metadata:
  name: extension-upgrade-test-initial
data:
  values.yaml: |
    type: paradedb
    version:
      postgresql: "17"
      paradedb: "0.15.20"  # Initial version
    
    cluster:
      instances: 1
    
    databases:
      - name: upgrade-test-db
        ensure: present
        owner: test-owner
        encoding: UTF8
        extensions:
          - name: pg_search
            ensure: present
            owner: test-owner
            version: "0.15.20"  # Initial version
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: extension-upgrade-test-upgrade
data:
  values.yaml: |
    type: paradedb
    version:
      postgresql: "17"
      paradedb: "0.15.21"  # Upgraded version
    
    cluster:
      instances: 1
    
    databases:
      - name: upgrade-test-db
        ensure: present
        owner: test-owner
        encoding: UTF8
        extensions:
          - name: pg_search
            ensure: present
            owner: test-owner
            version: "0.15.21"  # Upgraded version 
