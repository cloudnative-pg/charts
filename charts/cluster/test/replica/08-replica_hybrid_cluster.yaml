type: postgresql
mode: replica

cluster:
  instances: 2
  storage:
    size: 256Mi

replica:
  bootstrap:
    source: object_store
  origin:
    pg_basebackup:
      host: "source-cluster-rw"
      username: "streaming_replica"
      sslMode: "require"
      sslKeySecret:
        name: source-cluster-replication
        key: tls.key
      sslCertSecret:
        name: source-cluster-replication
        key: tls.crt
    objectStore:
      clusterName: source-cluster
      provider: s3
      endpointURL: "https://minio.minio.svc.cluster.local"
      endpointCA:
        name: kube-root-ca.crt
        key: ca.crt
      wal:
        encryption: ""
      data:
        encryption: ""
      s3:
        bucket: "mybucket"
        path: "/replica/v1"
        accessKey: "minio"
        secretKey: "minio123"
        region: "local"
      scheduledBackups: []
      retentionPolicy: "30d"
